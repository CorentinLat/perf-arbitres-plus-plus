<section class="home-component container text-center">
    <section>
        <h1 class="title my-3">{{ 'PAGE.HOME.TITLE' | translate }}</h1>
        <h3>{{ 'PAGE.HOME.IMPORT' | translate }}</h3>
        <p>{{ 'PAGE.HOME.MULTI_VIDEO_EXPLANATION' | translate }}</p>
    </section>

    <form class="row col-8 offset-2 mt-5 pt-5" [formGroup]="gameForm" (ngSubmit)="submit()" novalidate>
        <section class="text-start">
            <article class="col-6 offset-3">
                <label for="game-number" class="form-label">
                    {{ 'PAGE.HOME.FORM.LABEL.GAME_NUMBER' | translate }} :
                </label>
                <div class="input-group">
                    <span class="input-group-text">{{ gameNumberPrefix }}</span>
                    <input
                        [className]="exposeClassNameForGameNumberInput()"
                        id="game-number"
                        formControlName="gameNumber"
                        type="text"
                        game-number
                    >
                    <span class="input-group-text">{{ gameNumberSuffix }}</span>
                </div>
            </article>

            <article class="errors-container">
                <p class="error" *ngIf="gameNumberControl.touched && gameNumberControl.errors?.pattern">
                    {{ 'PAGE.HOME.ERROR.GAME_NUMBER.PATTERN' | translate }}
                </p>
                <p class="error" *ngIf="gameNumberControl.touched && gameNumberControl.errors?.required">
                    {{ 'PAGE.HOME.ERROR.GAME_NUMBER.REQUIRED' | translate }}
                </p>
            </article>
        </section>

        <section class="mt-3">
            <input
                [className]="exposeClassNameForVideoInput()"
                formControlName="video"
                type="file"
                multiple
            >
            <article class="errors-container">
                <p class="error" *ngIf="videoControl.errors?.invalidType">
                    {{ 'PAGE.HOME.ERROR.VIDEO.IMPORT_INVALID' | translate }}
                    <span *ngFor="let fileName of exposeErrorFileNames()">
                        <br>{{ fileName }}
                    </span>
                </p>
                <p class="error" *ngIf="videoControl.errors?.multipleVideoFormat">
                    {{ 'PAGE.HOME.ERROR.VIDEO.MULTIPLE_FORMAT' | translate }}
                </p>
                <p class="error" *ngIf="videoControl.errors?.processVideoFailed">
                    {{ 'PAGE.HOME.ERROR.VIDEO.PROCESS_FAILED' | translate }}
                </p>
            </article>
        </section>

        <article>
            <button
                class="btn btn-primary btn-lg"
                [disabled]="gameForm.invalid || isProcessingVideos"
            >
                {{ 'PAGE.HOME.IMPORT_BUTTON' | translate }}
            </button>
        </article>

        <article class="d-flex flex-column align-items-center" *ngIf="isProcessingVideos">
            <ngb-progressbar
                class="w-100"
                type="success"
                height="20px"
                [value]="progress"
                [striped]="true"
                [animated]="true"
            >
                <i>{{ progress }}%</i>
            </ngb-progressbar>
        </article>
    </form>
</section>
